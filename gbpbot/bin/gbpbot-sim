#!/usr/bin/env python3
"""
Script d'entrée pour le mode simulation de GBPBot
"""

import os
import sys
import argparse
from gbpbot.core.simulation import setup_simulation_mode, init_simulation_modules
from gbpbot.cli.main import main

if __name__ == "__main__":
    # Définir la variable d'environnement pour le mode simulation
    os.environ["GBPBOT_SIMULATION_MODE"] = "1"
    
    # Activer le mode simulation
    setup_simulation_mode(True)
    
    # Initialiser les modules de simulation
    init_simulation_modules()
    
    # Modifier les arguments pour exécuter le bot en mode simulation
    if len(sys.argv) == 1 or sys.argv[1] != "simulation":
        # Insérer l'argument 'run' et '--simulation' si ce n'est pas une commande 
        # de gestion de simulation
        new_argv = [sys.argv[0], "run", "--simulation"]
        new_argv.extend(sys.argv[1:])
        sys.argv = new_argv
    
    # Exécuter la CLI principale
    sys.exit(main()) 